<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

		<link href="assets/main.css" rel="stylesheet">
		<link href="assets/items.css" rel="stylesheet">


		<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.2/lodash.min.js"></script>
		<script src="https://unpkg.com/vue/dist/vue.js"></script>
		<script src="assets/save-state.js"></script>
	</head>
	<body>
		<div id="app">
			<div class="group group-3">
				<item :progress="progress" name="Graceful hood"></item>
				<item :progress="progress" name="Graceful top"></item>
				<item :progress="progress" name="Graceful gloves"></item>
				<item :progress="progress" name="Graceful cape"></item>
				<item :progress="progress" name="Graceful legs"></item>
				<item :progress="progress" name="Graceful boots"></item>
			</div>

			<div class="group group-3">
				<item :progress="progress" name="Prospector Helmet"></item>
				<item :progress="progress" name="Prospector Jacket"></item>
				<item :progress="progress" name="Coal bag"></item>
				<item :progress="progress" name="Prospector Boots"></item>
				<item :progress="progress" name="Prospector Legs"></item>
				<item :progress="progress" name="Gem bag"></item>
			</div>

			<div class="group group-3">
				<item :progress="progress" name="Farmer's strawhat"></item>
				<item :progress="progress" name="Farmer's jacket"></item>
				<item :progress="progress" name="Gricoller's can"></item>
				<item :progress="progress" name="Farmer's boots"></item>
				<item :progress="progress" name="Farmer's boro trousers"></item>
				<item :progress="progress" name="Seed box"></item>
			</div>

			<div class="group group-2">
				<item :progress="progress" name="Lumberjack Hat"></item>
				<item :progress="progress" name="Lumberjack Top"></item>
				<item :progress="progress" name="Lumberjack boots"></item>
				<item :progress="progress" name="Lumberjack legs"></item>
			</div>

			<div class="group group-2">
				<item :progress="progress" name="Angler hat"></item>
				<item :progress="progress" name="Angler top"></item>
				<item :progress="progress" name="Angler boots"></item>
				<item :progress="progress" name="Angler waders"></item>
			</div>

			<div class="group group-2">
				<item :progress="progress" name="Pyromancer hood"></item>
				<item :progress="progress" name="Pyromancer garb"></item>
				<item :progress="progress" name="Pyromancer boots"></item>
				<item :progress="progress" name="Pyromancer robe"></item>
			</div>

			<div class="group group-3">
				<item :progress="progress" name="Rogue mask"></item>
				<item :progress="progress" name="Rogue top"></item>
				<item :progress="progress" name="Rogue gloves"></item>
				<item :progress="progress" name="Rogue boots"></item>
				<item :progress="progress" name="Rogue trousers"></item>
			</div>

			<div class="break"></div>

			<div class="group group-5">
				<item :progress="progress" name="Void melee helm"></item>
				<item :progress="progress" name="Void mage helm"></item>
				<item :progress="progress" name="Void knight top"></item>
				<item :progress="progress" name="Elite void top"></item>
				<item :progress="progress" name="Void knight mace"></item>
				<item :progress="progress" name="Void ranger helm"></item>
				<item :progress="progress" name="Void knight gloves"></item>
				<item :progress="progress" name="Void knight robe"></item>
				<item :progress="progress" name="Elite void robe"></item>
			</div>

			<div class="group group-4">
				<item :progress="progress" name="Fighter torso"></item>
				<item :progress="progress" name="Penance gloves"></item>
				<item :progress="progress" name="Ranger hat"></item>
				<item :progress="progress" name="Healer hat"></item>
				<item :progress="progress" name="Penance skirt"></item>
				<item :progress="progress" name="Runner boots"></item>
				<item :progress="progress" name="Runner hat"></item>
				<item :progress="progress" name="Fighter hat"></item>
			</div>

			<div class="group group-4">
				<item :progress="progress" name="Infinity hat"></item>
				<item :progress="progress" name="Infinity top"></item>
				<item :progress="progress" name="Infinity bottoms"></item>
				<item :progress="progress" name="Master wand"></item>
				<item :progress="progress" name="Infinity gloves"></item>
				<item :progress="progress" name="Infinity boots"></item>
				<item :progress="progress" name="Bones to Peaches"></item>
				<item :progress="progress" name="Mage's book"></item>
			</div>

			<div class="group group-4">
				<item :progress="progress" name="Slayer helmet"></item>
				<item :progress="progress" name="Black slayer helmet"></item>
				<item :progress="progress" name="Green slayer helmet"></item>
				<item :progress="progress" name="Red slayer helmet"></item>
				<item :progress="progress" name="Dragon defender"></item>
				<item :progress="progress" name="Broad bolts"></item>
				<item :progress="progress" name="Slayer ring"></item>
				<item :progress="progress" name="Herb sack"></item>
			</div>

			<div class="break"></div>

			<div class="group group-2">
				<item :progress="progress" name="Dharok's helm"></item>
				<item :progress="progress" name="Dharok's platebody"></item>
				<item :progress="progress" name="Dharok's greataxe"></item>
				<item :progress="progress" name="Dharok's platelegs"></item>
			</div>

			<div class="group group-2">
				<item :progress="progress" name="Ahrim's hood"></item>
				<item :progress="progress" name="Ahrim's robetop"></item>
				<item :progress="progress" name="Ahrim's staff"></item>
				<item :progress="progress" name="Ahrim's robeskirt"></item>
			</div>

			<div class="group group-2">
				<item :progress="progress" name="Guthan's helm"></item>
				<item :progress="progress" name="Guthan's platebody"></item>
				<item :progress="progress" name="Guthan's warspear"></item>
				<item :progress="progress" name="Guthan's chainskirt"></item>
			</div>

			<div class="group group-2">
				<item :progress="progress" name="Torag's helm"></item>
				<item :progress="progress" name="Torag's platebody"></item>
				<item :progress="progress" name="Torag's hammers"></item>
				<item :progress="progress" name="Torag's platelegs"></item>
			</div>

			<div class="group group-2">
				<item :progress="progress" name="Verac's helm"></item>
				<item :progress="progress" name="Verac's brassard"></item>
				<item :progress="progress" name="Verac's flail"></item>
				<item :progress="progress" name="Verac's plateskirt"></item>
			</div>

			<div class="group group-2">
				<item :progress="progress" name="Karil's coif"></item>
				<item :progress="progress" name="Karil's leathertop"></item>
				<item :progress="progress" name="Karil's crossbow"></item>
				<item :progress="progress" name="Karil's leatherskirt"></item>
			</div>

			<div class="group">
				<item :progress="progress" name="Dragon 2h sword"></item>
				<item :progress="progress" name="Dragon axe"></item>
				<item :progress="progress" name="Dragon boots"></item>
				<item :progress="progress" name="Dragon chainbody"></item>
				<item :progress="progress" name="Dragon defender"></item>
				<item :progress="progress" name="Dragon full helm"></item>
				<item :progress="progress" name="Dragon pickaxe"></item>
				<item :progress="progress" name="Dragon platelegs"></item>
				<item :progress="progress" name="Dragon plateskirt"></item>
				<item :progress="progress" name="Dragon spear"></item>
				<item :progress="progress" name="Dragon sq shield"></item>
				<item :progress="progress" name="Dragon warhammer"></item>
			</div>

			<div class="break"></div>

			<div class="group">
				<item :progress="progress" name="Attack cape"></item>
				<item :progress="progress" name="Strength cape"></item>
				<item :progress="progress" name="Defence cape"></item>
				<item :progress="progress" name="Hitpoints cape"></item>
				<item :progress="progress" name="Ranging cape"></item>
				<item :progress="progress" name="Magic cape"></item>
				<item :progress="progress" name="Prayer cape"></item>
				<item :progress="progress" name="Slayer cape"></item>
				<item :progress="progress" name="Runecraft cape"></item>
				<item :progress="progress" name="Construction cape"></item>
				<item :progress="progress" name="Agility cape"></item>
				<item :progress="progress" name="Herblore cape"></item>
				<item :progress="progress" name="Thieving cape"></item>
				<item :progress="progress" name="Crafting cape"></item>
				<item :progress="progress" name="Fletching cape"></item>
				<item :progress="progress" name="Hunter cape"></item>
				<item :progress="progress" name="Mining cape"></item>
				<item :progress="progress" name="Smithing cape"></item>
				<item :progress="progress" name="Fishing cape"></item>
				<item :progress="progress" name="Cooking cape"></item>
				<item :progress="progress" name="Woodcutting cape"></item>
				<item :progress="progress" name="Firemaking cape"></item>
				<item :progress="progress" name="Farming cape"></item>
				<item :progress="progress" name="Achievement diary cape"></item>
				<item :progress="progress" name="Quest cape"></item>
				<item :progress="progress" name="Fire cape"></item>
				<item :progress="progress" name="Max cape"></item>
				<item :progress="progress" name="Fire max cape"></item>
				<item :progress="progress" name="Ava's max cape"></item>
				<item :progress="progress" name="Music cape"></item>
				<item :progress="progress" name="Zamorak max cape"></item>
				<item :progress="progress" name="Saradomin max cape"></item>
				<item :progress="progress" name="Guthix max cape"></item>
				<item :progress="progress" name="Ardougne max cape"></item>
			</div>

			<div class="break"></div>

			<div class="group">
				<item :progress="progress" name="Jar of darkness"></item>
				<item :progress="progress" name="Jar of dirt"></item>
				<item :progress="progress" name="Jar of miasma"></item>
				<item :progress="progress" name="Jar of sand"></item>
				<item :progress="progress" name="Jar of souls"></item>
				<item :progress="progress" name="Jar of swamp"></item>
			</div>

			<div class="group">
				<item :progress="progress" name="Champion scroll (earth warrior)"></item>
				<item :progress="progress" name="Champion scroll (ghoul)"></item>
				<item :progress="progress" name="Champion scroll (giant)"></item>
				<item :progress="progress" name="Champion scroll (goblin)"></item>
				<item :progress="progress" name="Champion scroll (hobgoblin)"></item>
				<item :progress="progress" name="Champion scroll (imp)"></item>
				<item :progress="progress" name="Champion scroll (jogre)"></item>
				<item :progress="progress" name="Champion scroll (lesser demon)"></item>
				<item :progress="progress" name="Champion scroll (skeleton)"></item>
				<item :progress="progress" name="Champion scroll (zombie)"></item>
			</div>

			<div class="group group-8">
				<item :progress="progress" name="Pet chaos elemental"></item>
				<item :progress="progress" name="Pet dagannoth prime"></item>
				<item :progress="progress" name="Pet dagganoth rex"></item>
				<item :progress="progress" name="Pet dagganoth supreme"></item>
				<item :progress="progress" name="Pet dark core"></item>
				<item :progress="progress" name="Pet general graardor"></item>
				<item :progress="progress" name="Pet k'ril tsutsaroth"></item>
				<item :progress="progress" name="Pet kraken"></item>
				<item :progress="progress" name="Pet kree'arra"></item>
				<item :progress="progress" name="Pet penance queen"></item>
				<item :progress="progress" name="Pet smoke devil"></item>
				<item :progress="progress" name="Pet snakeling"></item>
				<item :progress="progress" name="Pet zilyana"></item>
				<item :progress="progress" name="Tzrek-jad"></item>
				<item :progress="progress" name="Venenatis spideling"></item>
				<item :progress="progress" name="Vet'ion jr."></item>
				<item :progress="progress" name="Baby mole"></item>
				<item :progress="progress" name="Callisto cub"></item>
				<item :progress="progress" name="Kalphite princess"></item>
				<item :progress="progress" name="Scorpia's offspring"></item>
				<item :progress="progress" name="Prince black dragon"></item>
			</div>

			<div class="group group-4">
				<item :progress="progress" name="Baby chinchompa"></item>
				<item :progress="progress" name="Beaver"></item>
				<item :progress="progress" name="Chompy chick"></item>
				<item :progress="progress" name="Heron"></item>
				<item :progress="progress" name="Phoenix"></item>
				<item :progress="progress" name="Rock golem"></item>
				<item :progress="progress" name="Rocky"></item>
				<item :progress="progress" name="Tangleroot"></item>
				<item :progress="progress" name="Bloodhound"></item>
				<item :progress="progress" name="Giant squirrel"></item>
			</div>

			<div class="group group-3">
				<item :progress="progress" name="Abyssal demon"></item>
				<item :progress="progress" name="Basilisk"></item>
				<item :progress="progress" name="Cockatrice"></item>
				<item :progress="progress" name="Crawling hand"></item>
				<item :progress="progress" name="Kalphite queen"></item>
				<item :progress="progress" name="King black dragon"></item>
				<item :progress="progress" name="Kurask"></item>
			</div>

			<div class="break"></div>

			<div class="group group-1">
				<item :progress="progress" name="3rd age kiteshield"></item>
				<item :progress="progress" name="3rd age full helmet"></item>
				<item :progress="progress" name="3rd age platebody"></item>
				<item :progress="progress" name="3rd age platelegs"></item>
			</div>

			<div class="group group-1">
				<item :progress="progress" name="3rd age range coif"></item>
				<item :progress="progress" name="3rd age range legs"></item>
				<item :progress="progress" name="3rd age range top"></item>
				<item :progress="progress" name="3rd age vambraces"></item>
			</div>

			<div class="group group-1">
				<item :progress="progress" name="3rd age amulet"></item>
				<item :progress="progress" name="3rd age mage hat"></item>
				<item :progress="progress" name="3rd age robe top"></item>
				<item :progress="progress" name="3rd age robe"></item>
			</div>

			<div class="group group-2">
				<item :progress="progress" name="3rd age axe"></item>
				<item :progress="progress" name="3rd age bow"></item>
				<item :progress="progress" name="3rd age cloak"></item>
				<item :progress="progress" name="3rd age longsword"></item>
				<item :progress="progress" name="3rd age pickaxe"></item>
				<item :progress="progress" name="3rd age wand"></item>
			</div>

			<div class="group group-4">
				<item :progress="progress" name="Gilded 2h sword"></item>
				<item :progress="progress" name="Gilded boots"></item>
				<item :progress="progress" name="Gilded chainbody"></item>
				<item :progress="progress" name="Gilded full helm"></item>
				<item :progress="progress" name="Gilded kiteshield"></item>
				<item :progress="progress" name="Gilded med helm"></item>
				<item :progress="progress" name="Gilded platebody"></item>
				<item :progress="progress" name="Gilded platelegs"></item>
				<item :progress="progress" name="Gilded plateskirt"></item>
				<item :progress="progress" name="Gilded scimitar"></item>
				<item :progress="progress" name="Gilded spear"></item>
				<item :progress="progress" name="Gilded sq shield"></item>
			</div>

			<div class="group">
				<item :progress="progress" name="Book of balance"></item>
				<item :progress="progress" name="Book of darkness"></item>
				<item :progress="progress" name="Book of law"></item>
				<item :progress="progress" name="Book of war"></item>
				<item :progress="progress" name="Holy book"></item>
				<item :progress="progress" name="Unholy book"></item>
			</div>

			<div class="break"></div>
			<a href="#" v-on:click="progress = {}">clear</a>
		</div>

		<script>
			const STATE_MISSING = 'MISSING';
			const STATE_OWNED = 'OWNED';

			let app;

			Vue.component('item', {
				props: ['name', 'stages', 'progress'],
				template: `
					<span
						v-on:click="update"
						v-bind:title="name"
						v-bind:class="[{ item: true }, spriteSelector, { missing: isMissing }]">
					</span>`,
				computed: {
					isMissing: function() {
						return this.state === STATE_MISSING;
					},
					key: function () {
						return this.name
							.toLowerCase()
							.replace(/ /g, '-')
							.replace(/[\',\(\)\.&]/g, '')
							.replace(/--/g, '-');
					},
					state: function() {
						return this.progress[this.key] ? this.progress[this.key].state : STATE_MISSING;
					},
					stage: function() {
						return this.progress[this.key] ? this.progress[this.key].stage : 1;
					},
					spriteSelector: function() {
						return this.stages ? `item-${this.key}_${this.stage}` : `item-${this.key}`;
					},
				},
				methods: {
					update: function(event) {
						if (!app.progress[this.key]) {
							Vue.set(app.progress, this.key, { state: STATE_MISSING, stage: 1 });
						}

						if (this.state === STATE_MISSING) {
							app.progress[this.key].state = STATE_OWNED;

							if (this.stages) {
								app.progress[this.key].stage = 1;
							}
						}
						else {
							if (this.stages && app.progress[this.key].stage < this.stages) {
								app.progress[this.key].stage += 1;
							}
							else {
								app.progress[this.key].state = STATE_MISSING;
								app.progress[this.key].stage = 1;
							}
						}
					}
				}
			});

			app = new Vue({
				el: '#app',
				mixins: [saveStateStorage],
				methods: {
					getSaveStateConfig: function() {
						return {
							cacheKey: 'app',
							saveProperties: ['progress']
						};
					},
				},
				data: {
					progress: {

					}
				}
			});
		</script>
	</body>
</html>